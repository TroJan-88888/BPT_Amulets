<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>
<link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
<main class="container">
  <h2>Admin Panel</h2>
  <button onclick="logout()" class="button">Logout</button>
  <div id="albumManager">
    <h3>จัดการอัลบั้ม</h3>
    <form id="addForm">
      <input type="text" id="albumName" placeholder="ชื่ออัลบั้ม" required>
      <input type="url" id="albumURL" placeholder="URL อัลบั้ม" required>
      <button type="submit" class="button">เพิ่มอัลบั้ม</button>
    </form>
    <ul id="albumList"></ul>
  </div>
</main>

<script>
if(localStorage.getItem('adminLogged') !== 'true'){
  window.location.href = 'login.html';
}

let albums = JSON.parse(localStorage.getItem('albums')) || [];

const albumList = document.getElementById('albumList');
const addForm = document.getElementById('addForm');

function renderAlbums(){
  albumList.innerHTML = '';
  albums.forEach((a,i)=>{
    const li = document.createElement('li');
    li.innerHTML = `${a.name} - <a href="${a.url}" target="_blank">เปิด</a>
    <button onclick="deleteAlbum(${i})">ลบ</button>`;
    albumList.appendChild(li);
  });
}
function deleteAlbum(i){
  if(confirm('คุณต้องการลบอัลบั้มนี้?')){
    albums.splice(i,1);
    localStorage.setItem('albums', JSON.stringify(albums));
    renderAlbums();
  }
}
addForm.addEventListener('submit', e=>{
  e.preventDefault();
  const name = document.getElementById('albumName').value;
  const url = document.getElementById('albumURL').value;
  albums.push({name,url});
  localStorage.setItem('albums', JSON.stringify(albums));
  addForm.reset();
  renderAlbums();
});
renderAlbums();

function logout(){
  localStorage.removeItem('adminLogged');
  window.location.href = 'login.html';
}
</script>
</body>
</html>
